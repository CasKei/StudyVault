#50.002
# Digital Abstraction
[Lecture](https://youtu.be/xkVIr8jrtX0)
[Notes](https://natalieagus.github.io/50002/notes/digitalabstraction)
[[Basics of Information|Previous notes]]
[[Comp Struct|Course info]]
## Overview
One of the cheapest ways to encode information is in terms of 0s and 1s, using voltages. 
> Digital Abstraction: this method of determining discrete values out of voltages (which value is originally made up of real numbers, and therefore continuous and infinite)

### Benefits of the digital abstraction
1.  The digital abstraction is where one interprets voltage values as **binary** values, thus allowing us to encode information using voltages.
2.  Using voltages to encode bits of 0’s and 1’s provides a **cheap and stable way** for us to exchange information through digital devices.
3.  We can also **manipulate** or **change** information encoded using voltages very easily.

Why use Voltages?
Pros:
	easy generation, detection
	lots of engineering knowledge
	potentially 0 power in steady state
Cons:
	easily affected by environment
	DC connectivity required?
	R&C effects slow things down
### Semiconductor Devices (MOSFET)
The voltages that represent digital bits are generated by **semiconductor devices (MOSFET)** – something that we will learn in the [[CMOS Technology|next chapter]]. 
- Benefit of using semiconductors: ease of generation, require 0 power in steady-state.
- Drawback of semiconductors: the voltages generated by these semiconductors are easily affected by external disturbances, and hence may be unstable.
### Preserving the integrity of information
To preserve the integrity of information encoded in digital devices made of semiconductor materials, we need to **set some contracts between these interconnected digital devices**. In this notes, we are going to learn _how_ we can use voltages to encode information in a stable way that follows a particular contract called the ==**static discipline**== to ==guarantee the behavior of each processing block in the system==.

## A  Digital Processing Element: Combinational Device and Combinational Digital System
==A digital device is any device that uses voltages to encode information== in terms of “low voltage” **(bit 0)** and “high voltage” **(bit 1)**. 
Its output is a [[State Machine#^6d8a9a|pure function]] of the present input only _(there’s no memory of past inputs)_, and it has the following criteria.
### Combinational Device
A specific type of digital device that has the following criteria:
1.  One or more digital ==inputs==
2.  One or more digital ==outputs==
3.  A **functional specification** that ==details the value of each output for each possible **combination** of inputs== (can be illustrated in terms of truth table / boolean expression)
  > Its circuit performs an operation assigned logically by a boolean expression or truth table.
4. A **timing specification** consisting of an ==upper bound required  
    propagation time $T_{pd}$ for the device to compute the specified output==  
    values given a set of valid and stable input value(s)

![[Pasted image 20220127090727.png]]
Later on you will learn another type of digital logic devices called the ==**sequential** logic device==, whose output depends not only on the present input but also on the history of the inputs, hence having a _memory_. [[State Machine#^6d8a9a|State function (DDW)]]

### Combinational Digital System
A ==**set** of interconnected circuit elements is **combinational**== and can be labeled as a **combinational digital system** if and only if:
-   **Each circuit element is also combinational with ==no directed cycles**== (no _feedback_ loop), and
-   That very device’s ==input== is connected to ==**exactly one output== of another device** or to some vast supply of `0`s and `1`s.
![[Pasted image 20220127090758.png]]
## Voltage to encode information
The most naive way to use voltage to encode information is to use ==‘low’ voltage to encode valid ‘0’ and ‘high’ voltage to encode valid ‘1’,== and define the low and high threshold for each valid ‘0’ and ‘1’.
Anything that is between the low and high threshold value is called the ==invalid zone==, as shown in the figure below:
![[Pasted image 20220124195323.png]]
The values of operating voltage in practice is commonly set to be == ==0.3V== for low voltage and ==3.3V== for high voltage.

## The Static Discipline
The static discipline is ==one of the **contracts** bound for all logical elements making up a digital system.== The static discipline is stated as follows:
> The Static Discipline: **A digital system must be able to produce a valid output (for the next device connected at its output terminal) according to its specification if it is given a valid input.**

This contract **guarantees** the behavior for each processing block in a system, so that a set of such interconnected devices may work properly (are able to pass and compute valid information at the end of the chain of connections). ==This is necessary so that the system has a **predictable behavior.**==

**However this doesn’t mean that the opposite is true.** 
A device that ==receives invalid input _does not always have to_ produce invalid output.== 
We don’t care much and cannot define or guarantee the behaviour of the combinational device if it receives invalid input – it may or may not produce a valid output.

Therefore, one can say that **a combinational logic device always obeys the static discipline**.

In a [digital circuit](https://en.wikipedia.org/wiki/Digital_circuit "Digital circuit") or system, **static discipline** is a guarantee on logical elements that =="if inputs meet valid input thresholds, then the system guarantees outputs will meet valid output thresholds"==, named by Stephen A. Ward and Robert H. Halstead in 1990, but practiced for decades earlier.

The valid output thresholds voltages $V_{OH}$ (output high) and $V_{OL}$ (output low), and valid input thresholds $V_{IH}$ (input high) and $V_{IL}$ (input low), satisfy a [robustness principle](https://en.wikipedia.org/wiki/Robustness_principle "Robustness principle") such that

$$V_{OL} < V_{IL} < V_{IH} < V_{OH}$$

with sufficient [noise margins](https://en.wikipedia.org/wiki/Noise_margin "Noise margin") in the inequalities.

## Voltage Specifications and Noise Margin
Consider two digital devices connected in series as shown in the figure below. 
![[Pasted image 20220124201904.png]]
These devices are called a **buffer**, meaning that ==they pass the same bit over== (if it receives a low voltage, it will produce a low voltage and vice versa). 

If we were to _naively decide_ that any voltage below $V_{low}=0.5V$  as digital bit `0`, and any voltage above $V_{high}=2.5V$ as digital bit `1`, then our device **may violate the static discipline.**

This explanation can be made clear with the following example. Suppose we supply $0.5V$ and Device 1 is able to produce also $0.5V$, which means digital bit `0`.
-   However, the problem is that a _wire_, that connects two or more combinational devices together is susceptible to **noise**.
-   The voltage value that is received at Device 2 may be ==_slightly higher_ than 0.5V, for example: 0.55V instead, and therefore according to our specification, it is _no longer a valid bit `0`_==.
_Note that a noise can knock the voltage down as well, this is just an example that’s detrimental to the function of the devices in this example_

Device 1 in the figure above **violates** static discipline because ==_given a **valid** input, it *may_ be **unable** to produce a valid output== (to **reach** the next device 2), because the `0.5V` produced at the output of Device 1 may meet some disturbances that caused it to be slightly off, e.g: `0.55V`.

Hence, we need to ==account== for the presence of some light **noise**.
Instead of naively setting some voltage $V_{high}$ and $V_{low}$ as we did above, we need to set a _range_ of Voltages as valid bit `1` and `0` respectively.

Hence we need something called the ==**noise margin**== -- the yellow region illustrated in the Figure below.
The noise margin is formed by setting 4 Voltage specifications: ![[Pasted image 20220127090346.png]] which defines what range of voltage values signifies a vali digital bit and a valid digital bit `0` for any combinational logic component in the system:![[Pasted image 20220127090430.png]]
> The noise margin adds as a precaution against external disturbances (noise).

1.  $V_{ol}$ (voltage output low) and $V_{oh}$ (voltage output high) is the voltage that ==**your system** outputs==, depending on whether your system is outputting bit `0` or `1`. The output of this system is going to be ==received by another system== after traversing through some wire.
    
2.  $V_{il}$ (voltage input low) or $V_{ih}$ (voltage input high) is ==the voltage that **your system** receives as **input** from another system==.
    
3.  The **absolute difference** between $V_{ol}$ and $V_{il}$ is called the ==**low bit noise margin**==, and the **absolute difference** between $V_{oh}$ and $V_{ih}$ is called the ==**high bit noise margin**==.
    
    > Noise margin is formally defined as the **maximum** voltage amplitude of _extraneous_ (erronous) signal that can be added to the noise-free input level _without_ causing a drastic change in the output voltage and that it is still within the valid logic level.
    
4.  The ==**noise immunity**== (like an “overall” or “effective” noise margin) is the ==**_minimum_** between the high bit noise margin and the low bit noise margin==.
    
5.  $V_{ol}$ is **less** than $V_{il}$, because we would want to have some _buffer_ against ==noise==. A device ==always outputs a lower voltage value== to signify digital bit `0` `0` and ==accepts a slightly higher low-voltage value== as digital bit `0` `0`. The same logic applies for the higher region as well, as $V_{oh}$ is greater than $V_{ih}$
    
6.  In our previous case in Figure earlier, if $V_{ol}$ is set to be `0.5V`, and $V_{il}$ is set to be `0.6V`, then _Device 2_ will be able to **tolerate** up to `0.1V` of noise (if any). Therefore, `0.55V` in our example above is still ‘_seen_’ as a valid bit `0` when it arrives at the input terminal of Device 2, thus making Device 1 **_obeys the static discipline._**

==Once **set and chosen,** these four voltage specifications: $V_{ol}$, $V_{oh}$, $V_{il}$, and $V_{ih}$ are to be obeyed by every digital **device in an entire combinational logic circuit**.==
## Voltage Transfer Characteristic Function (VTC)
The VTC is a **plot** between the input voltage ($V_{in}$) to a digital system/device vs the output voltage ($V_{out}$) of this digital system.

VTC **does not** tell us how fast the device is. It just captures the static behaviour of the device and tells us what kind of device it is.

### VTC charts
#### Buffer
Low Vin gives a low Vout and vice versa
![[Pasted image 20220131150219.png]]
#### Inverter
Low Vin gives high Vout and vice versa
![[Pasted image 20220131150316.png]]
### Purpose and explanation
The **purpose** of plotting a VTC (typically obtained from device measurements: we supply input voltages and measure the output) helps us ==determine whether or not a digital device can be used== as a combinational logic device.

In other words, to find out if we can find a set of 4 voltage sepcifications: $V_{ol}, V_{oh}, V_{il}, V_{ih}$ for the device so that the ==device obeys the **static discipline.**==

- Red zone: **forbidden zone**, formed by the 4 voltage specifications $V_{ol}, V_{oh}, V_{il}, V_{ih}$ that we set for the entire system
- **Forbidden zone**: any value within this zone means that the device receives valid input but is unable to produce a valid output, hence *violating the static discipline and canot be used as a combinational logic device*.

You can quickly tell if a digital device can be potentially used as a combinational logic device ***iff.*** youcan find a set of these 4 voltage specifications $V_{ol}, V_{oh}, V_{il}, V_{ih}$ where its **VTC curve does not cross the forbidden zone** and that $V_{ol} < V_{il} < V_{ih} < V_{oh}$.

- Typically begin by guessing the value of $V_{ol}, V_{oh}, V_{il}, V_{ih}$ and check if the curve crosses the forbidden zone (check if static discipline obeyed) formed by these 4 values.
- If static discipline violateed, either adjust the guess or find another device.
- Also choose $V_{ol}, V_{oh}, V_{il}, V_{ih}$ that maximises noise immunity

If conditions above satisfied, then device is a **combinational logic device**. It's VTC has to possess the following ==characteristics==:

1. $\exists \text{ some region in the VTC whereby its absolute gain is } > 1$. $Gain$ is a function of $V_{in}$ and is ==defined== as $$Gain(V_{in}) = \dfrac{dV_{out}}{dV_{in}}$$In laymen terms, $Gain$ is the ==slope== during the transition $V_{in_i} \to V_{in_j}$  that results in some $V_{out_k} \to V_{out_l}$, so you can approximate $Gain$ by $$Gain \approx \dfrac{V_{oh} - V_{ol}}{V_{ih} - V_{il}}$$ ^21e7e9
2. ==If absolute $Gain > 1$, then there is a **finite, positive noise margin**. If absolute $Gain = 1$, then there is **zero noise margin**.== It is impossible to have $Gain < 1$ and still have the 4 voltage specs $V_{ol}, V_{oh}, V_{il}, V_{ih}$. Also having $absolute\ Gain > 1$ maintains the signal passed through the system as ==signal loss is inevitable== through the system
3. The device has a $nonlinear\ Gain$, meaning that $Gain$ is a function of $V_{in}$ and therefore the ==gradient== along the entire curve varies.
	- VTC curve for a combinatorial logic device should not be entirely a single constant gradient like the shape of a basic line equation, but more to an S or mirrored S shape
In other words, if conditions are not satisfied in the VTC curve, then it is not the VTC of a combinational logic device.

## Summary
In this chapter we have learned about the digital abstraction, that his how we can set some contracts such that we can establish digital values out of real-valued voltages.

Next chapter we will learn about MOSFET (transistor), that is one of the smallest components that makes up a digital device, and how we can use them to form a proper conbinational logic elements we call gates. These gates can be used to form even larger combinational circuits such as the adder, shifter, etc, and an even larger one such as the Arithmetic Logic Unit (you will build them in Lab 2 and 3).

Each larger device will provide a greater level of abstraction.

Therefore it is imperative that each combinational logic device/component, no matter how small, must conform to the static discipline and the established 4 voltage sepcifications (that must be chosen such that it fits with their VTC) so that the larger system can work as intended.